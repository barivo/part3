{"version":3,"sources":["PersonForm.js","Persons.js","Filter.js","Notification.js","services/persons.js","App.js","index.js"],"names":["PersonForm","props","newName","newNumber","handleNameChange","handleNumberChange","handleSubmit","value","onChange","onClick","type","Persons","persons","newFilter","handleDelete","showPerson","person","key","name","number","id","people","length","filter","toLowerCase","includes","map","Filter","handleSearch","Notification","message","setMessage","setTimeout","text","className","baseUrl","axios","get","then","response","personObj","post","data","put","delete","App","useState","setPersons","setNewName","setNewNumber","setNewFilter","useEffect","personsService","event","target","preventDefault","fixedNewName","trim","fixedNewNumber","newPerson","oldPerson","window","confirm","alert","catch","error","console","log","repsonse","concat","request","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1fe8f32d.chunk.js","sourcesContent":["import React from \"react\";\n\nconst PersonForm = (props) => {\n  const {\n    newName,\n    newNumber,\n    handleNameChange,\n    handleNumberChange,\n    handleSubmit\n  } = props;\n  return (\n    <>\n      <h2>add a new</h2>\n      <form>\n        <div>\n          name: <input value={newName} onChange={handleNameChange} />{\" \"}\n        </div>\n        <div>\n          number: <input value={newNumber} onChange={handleNumberChange} />\n        </div>\n        <div>\n          {\" \"}\n          <button onClick={handleSubmit} type=\"submit\">\n            {\" \"}\n            add{\" \"}\n          </button>\n        </div>\n      </form>\n    </>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Persons = ({ persons, newFilter, handleDelete }) => {\n  const showPerson = (person) => (\n    <span key={person.name}>\n      {\" \"}\n      {person.name} {person.number}{\" \"}\n      <button onClick={() => handleDelete(person.id, person)}>delete</button>\n      <br />\n    </span>\n  );\n  let people =\n    newFilter.length > 0\n      ? persons\n          .filter((person) => person.name.toLowerCase().includes(newFilter))\n          .map((person) => showPerson(person))\n      : persons.map((person) => showPerson(person));\n\n  return (\n    <>\n      <h2>Numbers</h2>\n      {people}\n    </>\n  );\n};\n\nexport default Persons;\n","import React from \"react\";\n\nconst Filter = ({ handleSearch }) => (\n  <>\n    <h2>Phonebook</h2>\n    <div>\n      filter shown with <input onChange={handleSearch} />\n    </div>\n  </>\n);\n\nexport default Filter;\n","import React from \"react\";\n\nconst Notification = ({ message, setMessage }) => {\n  if (message.type === null) {\n    return null;\n  } else {\n    setTimeout(() => setMessage({ type: null, text: null }), 6000);\n    return <div className={message.type}>{message.text}</div>;\n  }\n};\nexport default Notification;\n","import axios from \"axios\";\n// const baseUrl = \"http://localhost:3001/api/persons\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response);\n};\n\nconst add = (personObj) => {\n  return axios.post(baseUrl, personObj).then((response) => response.data);\n};\n\nconst update = (id, personObj) => {\n  return axios\n    .put(`${baseUrl}/${id}`, personObj)\n    .then((response) => response.data);\n};\n\nconst remove = (id) => {\n  return axios.delete(`${baseUrl}/${id}`).then((response) => response.data);\n};\n\nexport default { getAll, add, update, remove };\n","import React, { useState, useEffect } from \"react\";\nimport PersonForm from \"./PersonForm\";\nimport Persons from \"./Persons\";\nimport Filter from \"./Filter\";\nimport Notification from \"./Notification\";\nimport personsService from \"./services/persons\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newFilter, setNewFilter] = useState(\"\");\n  const [message, setMessage] = useState({ type: null, text: null });\n\n  useEffect(() => {\n    personsService.getAll().then((response) => {\n      setPersons(response.data);\n    });\n  }, []);\n  const handleNameChange = (event) => {\n    let name = event.target.value;\n    setNewName(name);\n  };\n  const handleNumberChange = (event) => {\n    let number = event.target.value;\n    setNewNumber(number);\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    const fixedNewName = newName.trim();\n    const fixedNewNumber = newNumber.trim();\n\n    const newPerson = { name: fixedNewName, number: fixedNewNumber };\n    const oldPerson = persons.filter(\n      (person) => person.name === fixedNewName\n    )[0];\n\n    if (oldPerson) {\n      if (\n        window.confirm(\n          alert(\n            `${fixedNewName} is already in the phonebook, replace the old number with a new one?`\n          )\n        )\n      ) {\n        personsService\n          .update(oldPerson.id, { ...oldPerson, number: newNumber })\n          .then((response) => {\n            setPersons(\n              persons.map((person) =>\n                person.id !== oldPerson.id ? person : response\n              )\n            );\n            setMessage({\n              type: \"success\",\n              text: `Changed ${oldPerson.name}'s number`,\n            });\n            setNewName(\"\");\n            setNewNumber(\"\");\n          })\n          .catch((error) => {\n            console.log(error);\n            setMessage({\n              type: \"error\",\n              text: error.response.data.error,\n            });\n            setNewName(\"\");\n            setNewNumber(\"\");\n          });\n      }\n    } else {\n      personsService\n        .add(newPerson)\n        .then((repsonse) => {\n          setPersons(persons.concat(repsonse));\n          setMessage({\n            type: \"success\",\n            text: `Added ${newPerson.name}`,\n          });\n          setNewName(\"\");\n          setNewNumber(\"\");\n        })\n        .catch((error) => {\n          // console.log(JSON.stringify(error.response));\n          if (error.response) {\n            setMessage({\n              type: \"error\",\n              text: error.response.data.error,\n            });\n          } else if (error.request) {\n            console.log(\"error.request\", error.request);\n          } else {\n            console.log(\"Error\", error.message);\n          }\n        });\n    }\n  };\n  const handleSearch = (event) => {\n    let filter = event.target.value.toLowerCase();\n    setNewFilter(filter);\n  };\n  const handleDelete = (id, person) => {\n    if (window.confirm(`Delete ${person.name}?`)) {\n      personsService\n        .remove(id)\n        .then(() => {\n          setMessage({\n            type: \"warning\",\n            text: `Deleted ${person.name}.`,\n          });\n          setPersons(persons.filter((person) => person.id !== id));\n        })\n        .catch((error) => {\n          setMessage({\n            type: \"error\",\n            text: `${person.name} no longer exists on server.`,\n          });\n          setPersons(persons.filter((person) => person.id !== id));\n        });\n    }\n  };\n\n  return (\n    <div>\n      <Notification message={message} setMessage={setMessage} />\n      <Filter\n        handleSearch={handleSearch}\n        message={message}\n        setMessage={setMessage}\n      />\n      <PersonForm\n        newName={newName}\n        newNumber={newNumber}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        handleSubmit={handleSubmit}\n        handleSearch={handleSearch}\n      />\n      <Persons\n        persons={persons}\n        newFilter={newFilter}\n        handleDelete={handleDelete}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}